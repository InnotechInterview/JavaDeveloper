## Криптография

### Токены

#### Access/Refresh-токены
Access-токен — это токен, который предоставляет доступ его владельцу к защищённым ресурсам сервера. 
Обычно он имеет короткий срок жизни и может нести в себе дополнительную информацию, такую как IP-адрес стороны, запрашивающей данный токен.

Refresh-токен — это токен, позволяющий клиентам запрашивать новые access-токены по истечении их времени жизни. 
Данные токены обычно выдаются на длительный срок.

Как правило, при использовании JSON-токенов в клиент-серверных приложениях реализована следующая схема:

1) Клиент проходит аутентификацию в приложении (к примеру, с использованием логина и пароля);
2) В случае успешной аутентификации сервер отправляет клиенту access- и refresh-токены;
3) При дальнейшем обращении к серверу клиент использует access-токен. Сервер проверяет токен на валидность и предоставляет клиенту доступ к ресурсам;
4) В случае, если access-токен становится невалидным, клиент отправляет refresh-токен, в ответ на который сервер предоставляет два обновлённых токена;
5) В случае, если refresh-токен становится невалидным, клиент опять должен пройти процесс аутентификации (п. 1).

#### JWT
JWT (JSON Web Token) - открытый стандарт (RFC 7519) для создания токенов доступа, основанный на формате JSON. 
Как правило, используется для передачи данных для аутентификации в клиент-серверных приложениях. 
Токены создаются сервером, подписываются секретным ключом и передаются клиенту, который в дальнейшем использует 
данный токен для подтверждения подлинности аккаунта.

Токен JWT состоит из трех частей:
1) заголовок (header)
   - представленный в формате JSON;
2) полезная нагрузка (payload)
   - представленная в формате JSON;
3) подпись или данные шифрования:
   - вычисляется на основании первых двух пунктов и зависит от выбранного алгоритма;
   - в случае использования неподписанного JWT может быть опущен.

<details><summary markdown="span">Заголовок</summary>

Обязательный ключ здесь только один:
1) alg: алгоритм, используемый для подписи/шифрования (в случае неподписанного JWT используется значение «none»).

Необязательные ключи:
1) typ: тип токена (type). Используется в случае, когда токены смешиваются с другими объектами, имеющими JOSE заголовки.
   Должно иметь значение «JWT».
2) cty: тип содержимого (content type). Если в токене помимо зарегистрированных служебных ключей есть пользовательские, 
   то данный ключ не должен присутствовать. В противном случае должно иметь значение «JWT»

</details>

<details><summary markdown="span">Полезная нагрузка</summary>

В данной секции указывается пользовательская информация (например, имя пользователя и уровень его доступа), 
а также могут быть использованы некоторые служебные ключи. Все они являются необязательными:
1) iss: чувствительная к регистру строка или URI, которая является уникальным идентификатором стороны, 
   генерирующей токен (issuer).
2) sub: чувствительная к регистру строка или URI, которая является уникальным идентификатором стороны, 
   о которой содержится информация в данном токене (subject).
   Значения с этим ключом должны быть уникальны в контексте стороны, генерирующей JWT.
3) aud: массив чувствительных к регистру строк или URI, являющийся списком получателей данного токена.
   Когда принимающая сторона получает JWT с данным ключом, она должна проверить наличие себя в получателях - иначе проигнорировать токен (audience).
4) exp: время в формате Unix Time, определяющее момент, когда токен станет невалидным (expiration).
5) nbf: в противоположность ключу exp, это время в формате Unix Time, определяющее момент, когда токен станет валидным (not before).
6) jti: строка, определяющая уникальный идентификатор данного токена (JWT ID).
7) iat: время в формате Unix Time, определяющее момент, когда токен был создан. iat и nbf могут не совпадать, например,
   если токен был создан раньше, чем время, когда он должен стать валидным (issued at).

</details>

<details><summary markdown="span">Пример компактного представления</summary>

Токены могут быть перекодированы в компактное представление: к заголовку и
полезной нагрузке применяется алгоритм кодирования Base64-URL, после чего добавляется подпись и
все три элемента разделяются точками (`.`).

К примеру, для заголовка и полезной нагрузки, которые выглядят следующим образом:
```json
{
  "alg": "HS512",
  "typ": "JWT"
}
{
  "sub": "12345",
  "name": "John Gold",
  "admin": true
}
```

Получим следующее компактное представление (переводы строки добавлены для наглядности):
```
eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.
eyJzdWIiOiIxMjM0NSIsIm5hbWUiOiJKb2huIEdvbGQiLCJhZG1pbiI6dHJ1ZX0K.
LIHjWCBORSWMEibq-tnT8ue_deUqZx1K0XxCOXZRrBI
```

</details>

Подробнее см. [здесь](https://medium.com/@goynikhil/what-is-jwt-jws-jwe-and-jwk-when-we-should-use-which-token-in-our-business-applications-74ae91f7c96b), [здесь](https://ru.wikipedia.org/wiki/JSON_Web_Token) и [здесь](https://jwt.io/).

#### JWS & JWE

JWS (JSON Web Signature) - это IETF стандарт (RFC 7515) для подписи произвольного контента,
предоставляя результат в формате JSON-based структуры данных.
Используется в качестве основы для различных веб-технологий, включая JWT (JSON Web Token).
Другими словами JWT использует JWS в качестве механизма подписи данных.

JWE (JSON Web Encryption) - это IETF стандарт (RFC 7516) для шифрования произвольного контента,
предоставляя результат в формате JSON-based структуры данных.

Стоит заметить, что JWE может быть подписан посредством "заворачивания" его в JWS.

### Генерация массивов случайных байт

#### Как происходит генерация обычных случайных чисел в java (Random)

ToDo:

---

#### Как происходит генерация криптографически важных случайных данных (например, ключа алгоритма шифрования)

ToDo:

---

### Шифрование

#### Виды алгоритмов шифрования

ToDo:

---

#### Блочные (симметричные) алгоритмы шифрования

ToDo:

---

#### Потоковые (симметричные) алгоритмы шифрования

ToDo:

---

#### Асимметричные алгоритмы шифрования

ToDo:

---

### Hash

ToDo:

---

### MAC

ToDo:

---

### ЭЦП

ToDo: